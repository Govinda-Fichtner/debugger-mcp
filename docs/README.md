# DAP MCP Server Documentation

This directory contains comprehensive documentation for the DAP-based MCP debugging server project.

## üìã Main Documents

### [**DAP_MCP_SERVER_PROPOSAL.md**](./DAP_MCP_SERVER_PROPOSAL.md) ‚≠ê
**The primary architecture and design document** (20,000+ words)

Complete proposal covering:
- Executive summary and motivation
- Full system architecture with diagrams
- Technology stack (Rust, Tokio, MCP, DAP)
- MCP interface design (resources and tools)
- Multi-language abstraction layer
- Component specifications
- 5 detailed use cases and user journeys
- Implementation roadmap (4 phases, 20 weeks)
- Risk assessment and mitigation
- Future enhancements

**Start here** for complete understanding of the project.

---

### [**architecture/COMPONENTS.md**](./architecture/COMPONENTS.md)
**Technical deep-dive into component architecture**

Detailed specifications for:
- Component dependency graph
- Module structure
- All 7 major components with code examples
- Error handling strategy
- Concurrency patterns (Arc+RwLock, Actor model, Request/Response)
- Testing strategy (unit and integration tests)
- Performance considerations
- Security measures

**Use this** for implementation guidance and code structure.

---

## üìö Research Documents

### Background Research

Located in `docs/research/` (auto-generated by research agents):

#### 1. **DAP Protocol Research**
Comprehensive analysis of Debug Adapter Protocol:
- Protocol specification v1.70.0
- Communication model (JSON-RPC over STDIO/TCP)
- Request/response/event message types
- 40+ DAP requests, 15+ events
- Breakpoint types and capabilities
- Variable inspection hierarchy
- Adapter ecosystem (40+ implementations)

#### 2. **DAP Client Implementations Analysis**
Study of mature DAP clients (nvim-dap, dap-mode):
- Process management best practices
- Multi-language support patterns
- Session lifecycle management
- User experience design
- Extensibility patterns
- MCP-specific design recommendations

#### 3. **Rust MCP Technology Stack**
Complete technology evaluation:
- MCP protocol analysis (JSON-RPC 2.0, OAuth, SSE)
- Rust MCP SDK review
- Recommended crate stack (Tokio, serde, dap-rs, interprocess, flume)
- State management patterns
- STDIO transport implementation
- Security best practices
- Performance guidelines

---

## üó∫Ô∏è Document Navigation

### For Product/Business Stakeholders
1. Read **Executive Summary** in [DAP_MCP_SERVER_PROPOSAL.md](./DAP_MCP_SERVER_PROPOSAL.md)
2. Review **Use Cases** (Section 8)
3. Check **Implementation Plan** (Section 9) for timeline
4. Review **Risk Assessment** (Section 10)

### For Architects
1. Read **Architecture Overview** (Section 2) in proposal
2. Study **Multi-Language Abstraction** (Section 6)
3. Review **Component Specifications** (Section 7)
4. Deep-dive [COMPONENTS.md](./architecture/COMPONENTS.md)

### For Developers
1. Read **Technology Stack** (Section 4) in proposal
2. Study [COMPONENTS.md](./architecture/COMPONENTS.md) fully
3. Review **Implementation Plan** (Section 9) for phasing
4. Reference research docs for protocol details

### For AI/ML Engineers
1. Read **MCP Interface Design** (Section 5) - how AI agents interact
2. Study **Use Cases and User Journeys** (Section 8) - AI debugging workflows
3. Review **DAP Protocol Research** - understand debugging primitives
4. Check **Future Enhancements** (Section 11) - LLM-optimized debugging

---

## üéØ Key Concepts

### What is DAP?
Debug Adapter Protocol - Microsoft's language-agnostic debugging standard used by VS Code, Vim, Emacs. Separates debugging UI from language-specific debuggers via JSON-RPC.

### What is MCP?
Model Context Protocol - Anthropic's standard for exposing capabilities to AI models through resources, tools, and prompts. Enables Claude Desktop and other AI agents to access external systems.

### What does this project do?
**Combines DAP + MCP** to let AI coding agents (Claude, Gemini, Codex) programmatically debug code across multiple languages (Python, JavaScript, Go, Rust, etc.) through a unified interface.

### Why is this valuable?
- **Autonomous debugging**: AI can investigate bugs without human intervention
- **Language-agnostic**: One interface, 40+ debuggers
- **Enhanced AI workflows**: AI explains code by stepping through execution
- **Reduced debugging time**: 40-50% of dev time is debugging

---

## üìä Project Status

**Phase**: Proposal / Architecture Complete ‚úÖ
**Next Step**: Begin Phase 1 Implementation (MVP)

### Completion Status
- [x] Research Phase Complete (DAP, MCP, Rust ecosystem)
- [x] Architecture Design Complete
- [x] MCP Interface Design Complete
- [x] Use Case Definition Complete
- [x] Risk Analysis Complete
- [ ] Implementation (Not started)
- [ ] Testing (Not started)
- [ ] Documentation (In progress - this doc)

---

## üöÄ Quick Start (Future Implementation)

Once implemented, usage will look like:

```bash
# Install
cargo install dap-mcp-server

# Run
dap-mcp-server --stdio

# Or with Claude Desktop
# Add to claude_desktop_config.json:
{
  "mcpServers": {
    "debugger": {
      "command": "dap-mcp-server",
      "args": ["--stdio"]
    }
  }
}
```

Then from Claude:
```
User: "Debug my Python script that crashes"

Claude:
  ‚Üí debugger_start(language="python", program="script.py")
  ‚Üí debugger_set_exception_breakpoints(filters=["uncaught"])
  ‚Üí debugger_continue()
  [Crash occurs]
  ‚Üí debugger_evaluate("locals()")
  ‚Üí Read debugger://sessions/{id}/stackTrace

  "The crash is because variable 'user_data' is None when fetch_user() fails..."
```

---

## üìñ Document Metadata

| Document | Words | Pages | Status |
|----------|-------|-------|--------|
| DAP_MCP_SERVER_PROPOSAL.md | 20,000+ | 68 | ‚úÖ Complete |
| architecture/COMPONENTS.md | 5,000+ | 17 | ‚úÖ Complete |
| Research (3 docs) | 15,000+ | 50+ | ‚úÖ Complete |
| **Total** | **40,000+** | **135+** | **‚úÖ Comprehensive** |

---

## ü§ù Contributing (Future)

Once open source:
1. Read architecture docs
2. Check GitHub issues
3. Follow development setup guide
4. Submit PRs with tests

---

## üìß Contact

**Project**: DAP-based MCP Debugging Server
**Purpose**: Enable AI-assisted debugging across programming languages
**Repository**: TBD (future open source release)
**Created**: October 2025

---

## üìö External References

### Specifications
- [Debug Adapter Protocol](https://microsoft.github.io/debug-adapter-protocol/)
- [DAP GitHub](https://github.com/microsoft/debug-adapter-protocol)
- [Model Context Protocol](https://spec.modelcontextprotocol.io/)

### Implementations
- [nvim-dap](https://github.com/mfussenegger/nvim-dap) - Neovim DAP client
- [dap-mode](https://github.com/emacs-lsp/dap-mode) - Emacs DAP client
- [debugpy](https://github.com/microsoft/debugpy) - Python debug adapter
- [vscode-js-debug](https://github.com/microsoft/vscode-js-debug) - JavaScript adapter

### Technologies
- [Tokio](https://tokio.rs/) - Async runtime for Rust
- [MCP Rust SDK](https://github.com/modelcontextprotocol/rust-sdk)
- [serde](https://serde.rs/) - Serialization framework

---

**Last Updated**: October 5, 2025
**Document Version**: 1.0
